<table class="component" [ngClass]="{'submenu-panel': isSubmenu, 'is-max-limit': !isSubmenu, 'pointer-events-none': isPointerDragging}"
  (mouseleave)="hideSubMenu()"  #root>
  <tr>
    <td *ngIf="0 < title.length" colspan="3"><div class="title">{{title}}<span *ngIf="altitudeHande"> (高度:<span style="display: inline-block; width: 2em; text-align: right;">{{altitudeHande.altitude}}</span>)</span></div></td>
  </tr>
  <tr>
    <td *ngIf="altitudeHande" class="altitude">0</td>
    <td *ngIf="altitudeHande" class="altitude"><input class="altitude" title="{{altitudeHande.altitude}}" [(ngModel)]="altitudeHande.altitude" type="range" max="12" min="-12" step="0.5"></td>
    <td>
      <ul>
        <ng-container *ngFor="let action of actions">
          <ng-container *ngTemplateOutlet="action?.type === 'separator' ? separator : actionMenu; context: { action: action }"></ng-container>
        </ng-container>
      </ul>
    </td>
  </tr>
</table>
<ng-template #actionMenu let-action="action">
  <li [ngClass]="{'hasHighlight': !action.disabled, 'disabled': action.disabled}" (click)="action.disabled ? false : doAction(action)" (mouseenter)="action.disabled ? false : showSubMenu(action)">
    <div class="menu-title">{{action.name}}</div>
    <div *ngIf="action.subActions" class="sub-menu-arrow">
      <i class="material-icons" style="font-size: 1em; vertical-align: bottom;">arrow_forward_ios</i>
    </div>
    <context-menu *ngIf="subMenu && parentMenu === action" [title]="action.name" [actions]="subMenu" [isSubmenu]="true"></context-menu>
  </li>
</ng-template>
<ng-template #separator let-action="action">
  <li>
    <hr class="separator" />
  </li>
</ng-template>